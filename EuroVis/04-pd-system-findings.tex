%!TEX root = main.tex
\begin{figure*}[ht!]
  \centering
  \vspace{-5pt}
  \includegraphics[width=0.95\linewidth]{figures/zvpp_system.pdf} %5.5
  \vspace{-5pt}\caption{\change{The \zvpp system consists of : (A) data selection panel (where users can select visualized dataset and attributes), (B) query canvas (where the queried data pattern is submitted and displayed), (C) results panel (where the visualizations most similar to the queried pattern are displayed as a ranked list), (D) control panel (where users can adjust various system-level settings), and (E) recommendations (where the typical and outlying trends in the dataset is displayed).}}
  \label{zvOverview}
  \vspace{-5pt}
\end{figure*}
\section{System-level Participatory Design Findings\label{sec:pd_findings}}
%All of the three domains described in the previous section recognized the need for a VQS. As discussed in Section~\ref{sec:methods},
%we worked closely with participants to develop features to address their problems and challenges.
\change{
  Holzblatt and Jones~\cite{HoltzblattJones} describes contextual inquiry as a technique that forms the basis for ``\textit{developing a system model that will support user's work}'' that subsequently ``\textit{fosters participatory design}''. Given the need for a VQS highlighted via contextual inquiry, we further collaborate with participants to develop features to address their problems and challenges. In this section, we first reflect on our feature discovery process to introduce the participatory design (PD) findings, then we provide a high-level system overview of the product of PD, \zvpp.
  \subsection{The Collaborative Feature Discovery Process}
  \par Throughout the PD process, we worked closely with participants to discover VQS capabilities that are essential for addressing their high-level domain challenges. We identified various subtasks based on participant's workflow, designed sensible features for accomplishing these subtasks that could be used in conjunction with existing VQS capabilities, and elicited feedback on intermediate feature prototypes. Bodker et al.~\cite{BodkerGronbaek} cites the importance of encouraging user participation and creativity in cooperative design through different techniques, such as future workshops, critiques, and situational role-playing. Similarly, our PD objective was to collect as many feature proposals as possible, while being inclusive across different domains. We further organized these features into Table~\ref{bigfeaturetable} through an iterative coding process by one of the authors.
  \par In grounded theory methods~\cite{Muller2012}, researchers first create open codes to assign descriptive labels to the raw data, proceeded by grouping open codes together by relationships or categories to form axial codes. Finally, selective codes are obtained by focussing on specific sets of axial codes to come up with a set of core emerging concepts. Using the list of features and example usage scenarios from PD and similar capabilities in existing VQSs as open codes, we then organized this list into axial codes representing ``components'' (first column in Table~\ref{bigfeaturetable}): core functionalities that are essential in VQSs. Finally, as we will describe in Section~\ref{sec:sensemaking}, the selective codes capture each of the sensemaking process (denoted by cell colors in Table~\ref{bigfeaturetable}). For example, smoothing is a feature in \zvpp that enable users to adjust data smoothing algorithms and parameters on-the-fly to both denoise the data and change the degree of shape approximation applied to all visualizations when performing pattern matching. This is useful for domains such as astronomy and material science where the dataset is noisy with large numbers of false positives that could be matched to any given pattern query. Smoothing, along with range selection and range invariance, is part of the \emph{match specification} component: VQS mechanisms for clarifying how matching should be performed. Both match specification and pattern specification (description of what the pattern query should look like) are essential components for supporting the sensemaking process top-down pattern search.
  % Smoothing is also supported in Qetch~\cite{Mannino2018}. Other interfaces have also developed constrained sketching mechanisms to allow users to partially specify certain shape characteristics, such as angular slope queries\techreport{for specifying the slope of a trend line}~\cite{Hochheiser2004} or piecewise trend querylines\techreport{over a specified data range}~\cite{ryall2005querylines}. Smoothing was chosen over these other interfaces for approximating key patterns in the data, since it was a familiar preprocessing step in our study participants' workflow.
  \par It is important to note that while some of the proposed features are pervasive in other general visual analytics (VA) systems~\cite{Heer2012,Amar2005}, they have not been incorporated in present-day VQSs. In fact, one of the key contributions of our work is recognizing the need for an integrative VQS whose sum is greater than its parts, that encourages users to rapidly generate hypotheses and discover insights by facilitating all three sensemaking process.
  \par Given the highly-evolving, undirected nature of exploratory data analysis~\cite{Keim2006,Tukey1970}, our collaborative feature discovery approach comes with its advantages and limitations. For instance, introducing the newly-added features from \zvpp that addressed a particular domain often results in unexpected use cases with other groups of participants. Considering feature proposals from multiple use cases can also lead to more generalized design choice. For example, around the same time when we spoke to astronomers who wanted to eliminate sparse time series from their pattern queries, our material science collaborators also expressed a need for inspecting only solvents with properties above a certain \input{bigtable} \noindent
  threshold. Through these use cases, data filtering arose as a crucial, common operation that was later incorporated into \zvpp to support this class of queries. %User requests (or lack thereof) may not always translate to a direct need.
  %, leading to a comprehensive list of added features listed in Table~\ref{bigfeaturetable}.
  % \agp{should we have topic sentences to organize takeaways better}
  \par While our collective brainstorming led to the cross-pollination and generalization of features, this technique can also lead to unnecessary features that result in wasted engineering efforts. During the design phase, there were numerous problems and features proposed by participants, but not all were incorporated in the tool. We detail the list of criteria that was used to decide whether to carry a feature from design to implementation stage in Appendix~\ref{apdx:pdartifact}. Failure to identify these early signs in the design phase may result in feature implementations that turn out not to be useful for the participants. Given exhaustive nature of Table~\ref{bigfeaturetable}, each motivated by example use cases from one or more domains, we further organize the features list in terms of the Section~\ref{sec:sensemaking} sensemaking framework and assess its effectiveness in the Section~\ref{sec:eval_findings} evaluation study.
}
\subsection{System Overview\label{sec:system}}% as described in the Figure~\ref{timeline} timeline
The aforementioned features were incrementally incorporated and improved over time, leading to our final PD product, \zvpp. The \zvpp interface is organized into 5 major regions all of which dynamically updates upon user interactions. Typically, users begin analysis by selecting the dataset and attributes to visualize in the \emph{data selection panel} (Figure~\ref{zvOverview}A). Then, they specify a pattern of interest as a query (hereafter referred to as \emph{pattern query}), through either sketching, inputting an equation, uploading a data pattern, or dragging and dropping an existing visualization, displayed on the \emph{query canvas} (Figure~\ref{zvOverview}B). \zvpp performs shape-matching between the queried pattern and other possible visualizations and returns a ranked list of visualizations that are most similar to the queried pattern, displayed in the \emph{results panel} (Figure~\ref{zvOverview}C). At any point during the analysis, analysts can adjust various system-level settings through the \emph{control panel} (Figure~\ref{zvOverview}D) or browse through the list of \emph{recommendations} provided by \zvpp (Figure~\ref{zvOverview}E). \change{For comparison, as shown in Appendix Figure~\ref{oldZV}, the existing \zv system from~\cite{Siddiqui2017} allowed users to query via sketching or drag-and-drop. The system displays representative and outlier pattern recommendations, but had limited capabilities to navigate across different data subsets and had few control settings.} Our \zvpp system is open source and available at: \url{github.com/[Annonymized for Submission]}.
